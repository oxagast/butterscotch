ZFS(8)                  FreeBSD System Manager's Manual                 ZFS(8)

NNAAMMEE
     zzffss – configure ZFS datasets

SSYYNNOOPPSSIISS
     zzffss --??VV
     zzffss vveerrssiioonn
     zzffss ssuubbccoommmmaanndd [_a_r_g_u_m_e_n_t_s]

DDEESSCCRRIIPPTTIIOONN
     The zzffss command configures ZFS datasets within a ZFS storage pool, as
     described in zpool(8).  A dataset is identified by a unique path within
     the ZFS namespace:

           _p_o_o_l[//_c_o_m_p_o_n_e_n_t]//_c_o_m_p_o_n_e_n_t

     for example:

           rpool/var/log

     The maximum length of a dataset name is ZZFFSS__MMAAXX__DDAATTAASSEETT__NNAAMMEE__LLEENN - 1
     ASCII characters (currently 255) satisfying [[AA--ZZaa--zz__..::// --]].  Additionally
     snapshots are allowed to contain a single @@ character, while bookmarks
     are allowed to contain a single ## character.  // is used as separator
     between components.  The maximum amount of nesting allowed in a path is
     zzffss__mmaaxx__ddaattaasseett__nneessttiinngg levels deep.  ZFS tunables (zzffss__**) are explained
     in zfs(4).

     A dataset can be one of the following:

           ffiillee ssyysstteemm  Can be mounted within the standard system namespace
                        and behaves like other file systems.  While ZFS file
                        systems are designed to be POSIX-compliant, known
                        issues exist that prevent compliance in some cases.
                        Applications that depend on standards conformance
                        might fail due to non-standard behavior when checking
                        file system free space.

           vvoolluummee       A logical volume exported as a raw or block device.
                        This type of dataset should only be used when a block
                        device is required.  File systems are typically used
                        in most environments.

           ssnnaappsshhoott     A read-only version of a file system or volume at a
                        given point in time.  It is specified as
                        _f_i_l_e_s_y_s_t_e_m@_n_a_m_e or _v_o_l_u_m_e@_n_a_m_e.

           bbooookkmmaarrkk     Much like a ssnnaappsshhoott, but without the hold on on-disk
                        data.  It can be used as the source of a send (but not
                        for a receive).  It is specified as _f_i_l_e_s_y_s_t_e_m#_n_a_m_e or
                        _v_o_l_u_m_e#_n_a_m_e.

     See zfsconcepts(7) for details.

   PPrrooppeerrttiieess
     Properties are divided into two types: native properties and user-defined
     (or "user") properties.  Native properties either export internal
     statistics or control ZFS behavior.  In addition, native properties are
     either editable or read-only.  User properties have no effect on ZFS
     behavior, but you can use them to annotate datasets in a way that is
     meaningful in your environment.  For more information about properties,
     see zfsprops(7).

   EEnnccrryyppttiioonn
     Enabling the eennccrryyppttiioonn feature allows for the creation of encrypted
     filesystems and volumes.  ZFS will encrypt file and zvol data, file
     attributes, ACLs, permission bits, directory listings, FUID mappings, and
     uusseerruusseedd/ggrroouuppuusseedd/pprroojjeeccttuusseedd data.  For an overview of encryption, see
     zfs-load-key(8).

SSUUBBCCOOMMMMAANNDDSS
     All subcommands that modify state are logged persistently to the pool in
     their original form.

     zzffss --?
       Displays a help message.

     zzffss --VV, ----vveerrssiioonn

     zzffss vveerrssiioonn
       Displays the software version of the zzffss userland utility and the zfs
       kernel module.

   DDaattaasseett MMaannaaggeemmeenntt
     zfs-list(8)
       Lists the property information for the given datasets in tabular form.

     zfs-create(8)
       Creates a new ZFS file system or volume.

     zfs-destroy(8)
       Destroys the given dataset(s), snapshot(s), or bookmark.

     zfs-rename(8)
       Renames the given dataset (filesystem or snapshot).

     zfs-upgrade(8)
       Manage upgrading the on-disk version of filesystems.

   SSnnaappsshhoottss
     zfs-snapshot(8)
       Creates snapshots with the given names.

     zfs-rollback(8)
       Roll back the given dataset to a previous snapshot.

     zfs-hold(8)/zfs-release(8)
       Add or remove a hold reference to the specified snapshot or snapshots.
       If a hold exists on a snapshot, attempts to destroy that snapshot by
       using the zzffss ddeessttrrooyy command return EEBBUUSSYY.

     zfs-diff(8)
       Display the difference between a snapshot of a given filesystem and
       another snapshot of that filesystem from a later time or the current
       contents of the filesystem.

   CClloonneess
     zfs-clone(8)
       Creates a clone of the given snapshot.

     zfs-promote(8)
       Promotes a clone file system to no longer be dependent on its "origin"
       snapshot.

   SSeenndd && RReecceeiivvee
     zfs-send(8)
       Generate a send stream, which may be of a filesystem, and may be
       incremental from a bookmark.

     zfs-receive(8)
       Creates a snapshot whose contents are as specified in the stream
       provided on standard input.  If a full stream is received, then a new
       file system is created as well.  Streams are created using the
       zfs-send(8) subcommand, which by default creates a full stream.

     zfs-bookmark(8)
       Creates a new bookmark of the given snapshot or bookmark.  Bookmarks
       mark the point in time when the snapshot was created, and can be used
       as the incremental source for a zzffss sseenndd command.

     zfs-redact(8)
       Generate a new redaction bookmark.  This feature can be used to allow
       clones of a filesystem to be made available on a remote system, in the
       case where their parent need not (or needs to not) be usable.

   PPrrooppeerrttiieess
     zfs-get(8)
       Displays properties for the given datasets.

     zfs-set(8)
       Sets the property or list of properties to the given value(s) for each
       dataset.

     zfs-inherit(8)
       Clears the specified property, causing it to be inherited from an
       ancestor, restored to default if no ancestor has the property set, or
       with the --SS option reverted to the received value if one exists.

   QQuuoottaass
     zfs-userspace(8)/zfs-groupspace(8)/zfs-projectspace(8)
       Displays space consumed by, and quotas on, each user, group, or project
       in the specified filesystem or snapshot.

     zfs-project(8)
       List, set, or clear project ID and/or inherit flag on the files or
       directories.

   MMoouunnttppooiinnttss
     zfs-mount(8)
       Displays all ZFS file systems currently mounted, or mount ZFS
       filesystem on a path described by its mmoouunnttppooiinntt property.

     zfs-unmount(8)
       Unmounts currently mounted ZFS file systems.

   SShhaarreess
     zfs-share(8)
       Shares available ZFS file systems.

     zfs-unshare(8)
       Unshares currently shared ZFS file systems.

   DDeelleeggaatteedd AAddmmiinniissttrraattiioonn
     zfs-allow(8)
       Delegate permissions on the specified filesystem or volume.

     zfs-unallow(8)
       Remove delegated permissions on the specified filesystem or volume.

   EEnnccrryyppttiioonn
     zfs-change-key(8)
       Add or change an encryption key on the specified dataset.

     zfs-load-key(8)
       Load the key for the specified encrypted dataset, enabling access.

     zfs-unload-key(8)
       Unload a key for the specified dataset, removing the ability to access
       the dataset.

   CChhaannnneell PPrrooggrraammss
     zfs-program(8)
       Execute ZFS administrative operations programmatically via a Lua
       script-language channel program.

   JJaaiillss
     zfs-jail(8)
       Attaches a filesystem to a jail.

     zfs-unjail(8)
       Detaches a filesystem from a jail.

   WWaaiittiinngg
     zfs-wait(8)
       Wait for background activity in a filesystem to complete.

EEXXIITT SSTTAATTUUSS
     The zzffss utility exits 00 on success, 11 if an error occurs, and 22 if
     invalid command line options were specified.

EEXXAAMMPPLLEESS
   EExxaammppllee 11:: Creating a ZFS File System Hierarchy
     The following commands create a file system named _p_o_o_l_/_h_o_m_e and a file
     system named _p_o_o_l_/_h_o_m_e_/_b_o_b.  The mount point _/_e_x_p_o_r_t_/_h_o_m_e is set for the
     parent file system, and is automatically inherited by the child file
     system.
           # zzffss ccrreeaattee _p_o_o_l_/_h_o_m_e
           # zzffss sseett mmoouunnttppooiinntt=_/_e_x_p_o_r_t_/_h_o_m_e _p_o_o_l_/_h_o_m_e
           # zzffss ccrreeaattee _p_o_o_l_/_h_o_m_e_/_b_o_b

   EExxaammppllee 22:: Creating a ZFS Snapshot
     The following command creates a snapshot named _y_e_s_t_e_r_d_a_y.  This snapshot
     is mounted on demand in the _._z_f_s_/_s_n_a_p_s_h_o_t directory at the root of the
     _p_o_o_l_/_h_o_m_e_/_b_o_b file system.
           # zzffss ssnnaappsshhoott _p_o_o_l_/_h_o_m_e_/_b_o_b@_y_e_s_t_e_r_d_a_y

   EExxaammppllee 33:: Creating and Destroying Multiple Snapshots
     The following command creates snapshots named _y_e_s_t_e_r_d_a_y of _p_o_o_l_/_h_o_m_e and
     all of its descendent file systems.  Each snapshot is mounted on demand
     in the _._z_f_s_/_s_n_a_p_s_h_o_t directory at the root of its file system.  The
     second command destroys the newly created snapshots.
           # zzffss ssnnaappsshhoott --rr _p_o_o_l_/_h_o_m_e@_y_e_s_t_e_r_d_a_y
           # zzffss ddeessttrrooyy --rr _p_o_o_l_/_h_o_m_e@_y_e_s_t_e_r_d_a_y

   EExxaammppllee 44:: Disabling and Enabling File System Compression
     The following command disables the ccoommpprreessssiioonn property for all file
     systems under _p_o_o_l_/_h_o_m_e.  The next command explicitly enables ccoommpprreessssiioonn
     for _p_o_o_l_/_h_o_m_e_/_a_n_n_e.
           # zzffss sseett ccoommpprreessssiioonn=ooffff _p_o_o_l_/_h_o_m_e
           # zzffss sseett ccoommpprreessssiioonn=oonn _p_o_o_l_/_h_o_m_e_/_a_n_n_e

   EExxaammppllee 55:: Listing ZFS Datasets
     The following command lists all active file systems and volumes in the
     system.  Snapshots are displayed if lliissttssnnaappss=oonn.  The default is ooffff.
     See zpoolprops(7) for more information on pool properties.
           # zzffss lliisstt
           NAME                      USED  AVAIL  REFER  MOUNTPOINT
           pool                      450K   457G    18K  /pool
           pool/home                 315K   457G    21K  /export/home
           pool/home/anne             18K   457G    18K  /export/home/anne
           pool/home/bob             276K   457G   276K  /export/home/bob

   EExxaammppllee 66:: Setting a Quota on a ZFS File System
     The following command sets a quota of 50 Gbytes for _p_o_o_l_/_h_o_m_e_/_b_o_b:
           # zzffss sseett qquuoottaa=_5_0_G _p_o_o_l_/_h_o_m_e_/_b_o_b

   EExxaammppllee 77:: Listing ZFS Properties
     The following command lists all properties for _p_o_o_l_/_h_o_m_e_/_b_o_b:
           # zzffss ggeett aallll _p_o_o_l_/_h_o_m_e_/_b_o_b
           NAME           PROPERTY              VALUE                  SOURCE
           pool/home/bob  type                  filesystem             -
           pool/home/bob  creation              Tue Jul 21 15:53 2009  -
           pool/home/bob  used                  21K                    -
           pool/home/bob  available             20.0G                  -
           pool/home/bob  referenced            21K                    -
           pool/home/bob  compressratio         1.00x                  -
           pool/home/bob  mounted               yes                    -
           pool/home/bob  quota                 20G                    local
           pool/home/bob  reservation           none                   default
           pool/home/bob  recordsize            128K                   default
           pool/home/bob  mountpoint            /pool/home/bob         default
           pool/home/bob  sharenfs              off                    default
           pool/home/bob  checksum              on                     default
           pool/home/bob  compression           on                     local
           pool/home/bob  atime                 on                     default
           pool/home/bob  devices               on                     default
           pool/home/bob  exec                  on                     default
           pool/home/bob  setuid                on                     default
           pool/home/bob  readonly              off                    default
           pool/home/bob  zoned                 off                    default
           pool/home/bob  snapdir               hidden                 default
           pool/home/bob  acltype               off                    default
           pool/home/bob  aclmode               discard                default
           pool/home/bob  aclinherit            restricted             default
           pool/home/bob  canmount              on                     default
           pool/home/bob  xattr                 on                     default
           pool/home/bob  copies                1                      default
           pool/home/bob  version               4                      -
           pool/home/bob  utf8only              off                    -
           pool/home/bob  normalization         none                   -
           pool/home/bob  casesensitivity       sensitive              -
           pool/home/bob  vscan                 off                    default
           pool/home/bob  nbmand                off                    default
           pool/home/bob  sharesmb              off                    default
           pool/home/bob  refquota              none                   default
           pool/home/bob  refreservation        none                   default
           pool/home/bob  primarycache          all                    default
           pool/home/bob  secondarycache        all                    default
           pool/home/bob  usedbysnapshots       0                      -
           pool/home/bob  usedbydataset         21K                    -
           pool/home/bob  usedbychildren        0                      -
           pool/home/bob  usedbyrefreservation  0                      -

     The following command gets a single property value:
           # zzffss ggeett --HH --oo vvaalluuee ccoommpprreessssiioonn _p_o_o_l_/_h_o_m_e_/_b_o_b
           on

     The following command lists all properties with local settings for
     _p_o_o_l_/_h_o_m_e_/_b_o_b:
           # zzffss ggeett --rr --ss llooccaall --oo nnaammee,pprrooppeerrttyy,vvaalluuee aallll _p_o_o_l_/_h_o_m_e_/_b_o_b
           NAME           PROPERTY              VALUE
           pool/home/bob  quota                 20G
           pool/home/bob  compression           on

   EExxaammppllee 88:: Rolling Back a ZFS File System
     The following command reverts the contents of _p_o_o_l_/_h_o_m_e_/_a_n_n_e to the
     snapshot named _y_e_s_t_e_r_d_a_y, deleting all intermediate snapshots:
           # zzffss rroollllbbaacckk --rr _p_o_o_l_/_h_o_m_e_/_a_n_n_e@_y_e_s_t_e_r_d_a_y

   EExxaammppllee 99:: Creating a ZFS Clone
     The following command creates a writable file system whose initial
     contents are the same as _p_o_o_l_/_h_o_m_e_/_b_o_b_@_y_e_s_t_e_r_d_a_y.
           # zzffss cclloonnee _p_o_o_l_/_h_o_m_e_/_b_o_b_@_y_e_s_t_e_r_d_a_y _p_o_o_l_/_c_l_o_n_e

   EExxaammppllee 1100:: Promoting a ZFS Clone
     The following commands illustrate how to test out changes to a file
     system, and then replace the original file system with the changed one,
     using clones, clone promotion, and renaming:
           # zzffss ccrreeaattee _p_o_o_l_/_p_r_o_j_e_c_t_/_p_r_o_d_u_c_t_i_o_n
             populate /pool/project/production with data
           # zzffss ssnnaappsshhoott _p_o_o_l_/_p_r_o_j_e_c_t_/_p_r_o_d_u_c_t_i_o_n@_t_o_d_a_y
           # zzffss cclloonnee _p_o_o_l_/_p_r_o_j_e_c_t_/_p_r_o_d_u_c_t_i_o_n_@_t_o_d_a_y _p_o_o_l_/_p_r_o_j_e_c_t_/_b_e_t_a
             make changes to /pool/project/beta and test them
           # zzffss pprroommoottee _p_o_o_l_/_p_r_o_j_e_c_t_/_b_e_t_a
           # zzffss rreennaammee _p_o_o_l_/_p_r_o_j_e_c_t_/_p_r_o_d_u_c_t_i_o_n _p_o_o_l_/_p_r_o_j_e_c_t_/_l_e_g_a_c_y
           # zzffss rreennaammee _p_o_o_l_/_p_r_o_j_e_c_t_/_b_e_t_a _p_o_o_l_/_p_r_o_j_e_c_t_/_p_r_o_d_u_c_t_i_o_n
             once the legacy version is no longer needed, it can be destroyed
           # zzffss ddeessttrrooyy _p_o_o_l_/_p_r_o_j_e_c_t_/_l_e_g_a_c_y

   EExxaammppllee 1111:: Inheriting ZFS Properties
     The following command causes _p_o_o_l_/_h_o_m_e_/_b_o_b and _p_o_o_l_/_h_o_m_e_/_a_n_n_e to inherit
     the cchheecckkssuumm property from their parent.
           # zzffss iinnhheerriitt cchheecckkssuumm _p_o_o_l_/_h_o_m_e_/_b_o_b _p_o_o_l_/_h_o_m_e_/_a_n_n_e

   EExxaammppllee 1122:: Remotely Replicating ZFS Data
     The following commands send a full stream and then an incremental stream
     to a remote machine, restoring them into _p_o_o_l_B_/_r_e_c_e_i_v_e_d_/_f_s_@_a and
     _p_o_o_l_B_/_r_e_c_e_i_v_e_d_/_f_s_@_b, respectively.  _p_o_o_l_B must contain the file system
     _p_o_o_l_B_/_r_e_c_e_i_v_e_d, and must not initially contain _p_o_o_l_B_/_r_e_c_e_i_v_e_d_/_f_s.
           # zzffss sseenndd _p_o_o_l_/_f_s_@_a |
               sssshh _h_o_s_t zzffss rreecceeiivvee _p_o_o_l_B_/_r_e_c_e_i_v_e_d_/_f_s@_a
           # zzffss sseenndd --ii _a _p_o_o_l_/_f_s_@_b |
               sssshh _h_o_s_t zzffss rreecceeiivvee _p_o_o_l_B_/_r_e_c_e_i_v_e_d_/_f_s

   EExxaammppllee 1133:: Using the zzffss rreecceeiivvee --dd Option
     The following command sends a full stream of _p_o_o_l_A_/_f_s_A_/_f_s_B_@_s_n_a_p to a
     remote machine, receiving it into _p_o_o_l_B_/_r_e_c_e_i_v_e_d_/_f_s_A_/_f_s_B_@_s_n_a_p.  The
     _f_s_A_/_f_s_B_@_s_n_a_p portion of the received snapshot's name is determined from
     the name of the sent snapshot.  _p_o_o_l_B must contain the file system
     _p_o_o_l_B_/_r_e_c_e_i_v_e_d.  If _p_o_o_l_B_/_r_e_c_e_i_v_e_d_/_f_s_A does not exist, it is created as
     an empty file system.
           # zzffss sseenndd _p_o_o_l_A_/_f_s_A_/_f_s_B_@_s_n_a_p |
               sssshh _h_o_s_t zzffss rreecceeiivvee --dd _p_o_o_l_B_/_r_e_c_e_i_v_e_d

   EExxaammppllee 1144:: Setting User Properties
     The following example sets the user-defined _c_o_m_._e_x_a_m_p_l_e:_d_e_p_a_r_t_m_e_n_t
     property for a dataset:
           # zzffss sseett _c_o_m_._e_x_a_m_p_l_e:_d_e_p_a_r_t_m_e_n_t=_1_2_3_4_5 _t_a_n_k_/_a_c_c_o_u_n_t_i_n_g

   EExxaammppllee 1155:: Performing a Rolling Snapshot
     The following example shows how to maintain a history of snapshots with a
     consistent naming scheme.  To keep a week's worth of snapshots, the user
     destroys the oldest snapshot, renames the remaining snapshots, and then
     creates a new snapshot, as follows:
           # zzffss ddeessttrrooyy --rr _p_o_o_l_/_u_s_e_r_s_@_7_d_a_y_s_a_g_o
           # zzffss rreennaammee --rr _p_o_o_l_/_u_s_e_r_s_@_6_d_a_y_s_a_g_o @_7_d_a_y_s_a_g_o
           # zzffss rreennaammee --rr _p_o_o_l_/_u_s_e_r_s_@_5_d_a_y_s_a_g_o @_6_d_a_y_s_a_g_o
           # zzffss rreennaammee --rr _p_o_o_l_/_u_s_e_r_s_@_4_d_a_y_s_a_g_o @_5_d_a_y_s_a_g_o
           # zzffss rreennaammee --rr _p_o_o_l_/_u_s_e_r_s_@_3_d_a_y_s_a_g_o @_4_d_a_y_s_a_g_o
           # zzffss rreennaammee --rr _p_o_o_l_/_u_s_e_r_s_@_2_d_a_y_s_a_g_o @_3_d_a_y_s_a_g_o
           # zzffss rreennaammee --rr _p_o_o_l_/_u_s_e_r_s_@_y_e_s_t_e_r_d_a_y @_2_d_a_y_s_a_g_o
           # zzffss rreennaammee --rr _p_o_o_l_/_u_s_e_r_s_@_t_o_d_a_y @_y_e_s_t_e_r_d_a_y
           # zzffss ssnnaappsshhoott --rr _p_o_o_l_/_u_s_e_r_s@_t_o_d_a_y

   EExxaammppllee 1166:: Setting sharenfs Property Options on a ZFS File System
     The following commands show how to set sshhaarreennffss property options to
     enable read-write access for a set of IP addresses and to enable root
     access for system "neo" on the _t_a_n_k_/_h_o_m_e file system:
           # zzffss sseett sshhaarreennffss='_r_w=@123.123.0.0/16:[::1],root=_n_e_o' tank/home

     If you are using DNS for host name resolution, specify the fully-
     qualified hostname.

   EExxaammppllee 1177:: Delegating ZFS Administration Permissions on a ZFS Dataset
     The following example shows how to set permissions so that user _c_i_n_d_y_s
     can create, destroy, mount, and take snapshots on _t_a_n_k_/_c_i_n_d_y_s.  The
     permissions on _t_a_n_k_/_c_i_n_d_y_s are also displayed.
           # zzffss aallllooww cciinnddyyss ccrreeaattee,ddeessttrrooyy,mmoouunntt,ssnnaappsshhoott _t_a_n_k_/_c_i_n_d_y_s
           # zzffss aallllooww _t_a_n_k_/_c_i_n_d_y_s
           ---- Permissions on tank/cindys --------------------------------------
           Local+Descendent permissions:
                   user cindys create,destroy,mount,snapshot

     Because the _t_a_n_k_/_c_i_n_d_y_s mount point permission is set to 755 by default,
     user _c_i_n_d_y_s will be unable to mount file systems under _t_a_n_k_/_c_i_n_d_y_s.  Add
     an ACE similar to the following syntax to provide mount point access:
           # cchhmmoodd A+user:_c_i_n_d_y_s:add_subdirectory:allow _/_t_a_n_k_/_c_i_n_d_y_s

   EExxaammppllee 1188:: Delegating Create Time Permissions on a ZFS Dataset
     The following example shows how to grant anyone in the group _s_t_a_f_f to
     create file systems in _t_a_n_k_/_u_s_e_r_s.  This syntax also allows staff members
     to destroy their own file systems, but not destroy anyone else's file
     system.  The permissions on _t_a_n_k_/_u_s_e_r_s are also displayed.
           # zzffss aallllooww _s_t_a_f_f ccrreeaattee,mmoouunntt _t_a_n_k_/_u_s_e_r_s
           # zzffss aallllooww --cc ddeessttrrooyy _t_a_n_k_/_u_s_e_r_s
           # zzffss aallllooww _t_a_n_k_/_u_s_e_r_s
           ---- Permissions on tank/users ---------------------------------------
           Permission sets:
                   destroy
           Local+Descendent permissions:
                   group staff create,mount

   EExxaammppllee 1199:: Defining and Granting a Permission Set on a ZFS Dataset
     The following example shows how to define and grant a permission set on
     the _t_a_n_k_/_u_s_e_r_s file system.  The permissions on _t_a_n_k_/_u_s_e_r_s are also
     displayed.
           # zzffss aallllooww --ss @_p_s_e_t ccrreeaattee,ddeessttrrooyy,ssnnaappsshhoott,mmoouunntt _t_a_n_k_/_u_s_e_r_s
           # zzffss aallllooww ssttaaffff @_p_s_e_t _t_a_n_k_/_u_s_e_r_s
           # zzffss aallllooww _t_a_n_k_/_u_s_e_r_s
           ---- Permissions on tank/users ---------------------------------------
           Permission sets:
                   @pset create,destroy,mount,snapshot
           Local+Descendent permissions:
                   group staff @pset

   EExxaammppllee 2200:: Delegating Property Permissions on a ZFS Dataset
     The following example shows to grant the ability to set quotas and
     reservations on the _u_s_e_r_s_/_h_o_m_e file system.  The permissions on
     _u_s_e_r_s_/_h_o_m_e are also displayed.
           # zzffss aallllooww _c_i_n_d_y_s qquuoottaa,rreesseerrvvaattiioonn _u_s_e_r_s_/_h_o_m_e
           # zzffss aallllooww _u_s_e_r_s_/_h_o_m_e
           ---- Permissions on users/home ---------------------------------------
           Local+Descendent permissions:
                   user cindys quota,reservation
           cindys% zfs set quota=10G users/home/marks
           cindys% zfs get quota users/home/marks
           NAME              PROPERTY  VALUE  SOURCE
           users/home/marks  quota     10G    local

   EExxaammppllee 2211:: Removing ZFS Delegated Permissions on a ZFS Dataset
     The following example shows how to remove the snapshot permission from
     the _s_t_a_f_f group on the ttaannkk//uusseerrss file system.  The permissions on
     ttaannkk//uusseerrss are also displayed.
           # zzffss uunnaallllooww _s_t_a_f_f ssnnaappsshhoott _t_a_n_k_/_u_s_e_r_s
           # zzffss aallllooww _t_a_n_k_/_u_s_e_r_s
           ---- Permissions on tank/users ---------------------------------------
           Permission sets:
                   @pset create,destroy,mount,snapshot
           Local+Descendent permissions:
                   group staff @pset

   EExxaammppllee 2222:: Showing the differences between a snapshot and a ZFS Dataset
     The following example shows how to see what has changed between a prior
     snapshot of a ZFS dataset and its current state.  The --FF option is used
     to indicate type information for the files affected.
           # zzffss ddiiffff --FF _t_a_n_k_/_t_e_s_t_@_b_e_f_o_r_e _t_a_n_k_/_t_e_s_t
           M       /       /tank/test/
           M       F       /tank/test/linked      (+1)
           R       F       /tank/test/oldname -> /tank/test/newname
           -       F       /tank/test/deleted
           +       F       /tank/test/created
           M       F       /tank/test/modified

   EExxaammppllee 2233:: Creating a bookmark
     The following example creates a bookmark to a snapshot.  This bookmark
     can then be used instead of a snapshot in send streams.
           # zzffss bbooookkmmaarrkk _r_p_o_o_l@_s_n_a_p_s_h_o_t _r_p_o_o_l#_b_o_o_k_m_a_r_k

   EExxaammppllee 2244:: Setting sshhaarreessmmbb Property Options on a ZFS File System
     The following example show how to share SMB filesystem through ZFS.  Note
     that a user and their password must be given.
           # ssmmbbmmoouunntt _/_/_1_2_7_._0_._0_._1_/_s_h_a_r_e___t_m_p _/_m_n_t_/_t_m_p --oo
           user=workgroup/turbo,password=obrut,uid=1000

     Minimal _/_e_t_c_/_s_a_m_b_a_/_s_m_b_._c_o_n_f configuration is required, as follows.

     Samba will need to bind to the loopback interface for the ZFS utilities
     to communicate with Samba.  This is the default behavior for most Linux
     distributions.

     Samba must be able to authenticate a user.  This can be done in a number
     of ways (passwd(5), LDAP, smbpasswd(5), &c.).  How to do this is outside
     the scope of this document – refer to smb.conf(5) for more information.

     See the _U_S_E_R_S_H_A_R_E_S section for all configuration options, in case you
     need to modify any options of the share afterwards.  Do note that any
     changes done with the net(8) command will be undone if the share is ever
     unshared (like via a reboot).

EENNVVIIRROONNMMEENNTT VVAARRIIAABBLLEESS
     ZZFFSS__CCOOLLOORR           Use ANSI color in zzffss ddiiffff and zzffss lliisstt output.

     ZZFFSS__MMOOUUNNTT__HHEELLPPEERR    Cause zzffss mmoouunntt to use mount(8) to mount ZFS
                         datasets.  This option is provided for backwards
                         compatibility with older ZFS versions.

     ZZFFSS__SSEETT__PPIIPPEE__MMAAXX    Tells zzffss to set the maximum pipe size for
                         sends/recieves.  Disabled by default on Linux due to
                         an unfixed deadlock in Linux's pipe size handling
                         code.

     ZZFFSS__MMOODDUULLEE__TTIIMMEEOOUUTT  Time, in seconds, to wait for _/_d_e_v_/_z_f_s to appear.
                         Defaults to 1100, max 660000 (10 minutes).  If <00, wait
                         forever; if 00, don't wait.

IINNTTEERRFFAACCEE SSTTAABBIILLIITTYY
     CCoommmmiitttteedd.

SSEEEE AALLSSOO
     attr(1), gzip(1), ssh(1), chmod(2), fsync(2), stat(2), write(2), acl(5),
     attributes(5), exports(5), zfsconcepts(7), zfsprops(7), exportfs(8),
     mount(8), net(8), selinux(8), zfs-allow(8), zfs-bookmark(8),
     zfs-change-key(8), zfs-clone(8), zfs-create(8), zfs-destroy(8),
     zfs-diff(8), zfs-get(8), zfs-groupspace(8), zfs-hold(8), zfs-inherit(8),
     zfs-jail(8), zfs-list(8), zfs-load-key(8), zfs-mount(8), zfs-program(8),
     zfs-project(8), zfs-projectspace(8), zfs-promote(8), zfs-receive(8),
     zfs-redact(8), zfs-release(8), zfs-rename(8), zfs-rollback(8),
     zfs-send(8), zfs-set(8), zfs-share(8), zfs-snapshot(8), zfs-unallow(8),
     zfs-unjail(8), zfs-unload-key(8), zfs-unmount(8), zfs-unshare(8),
     zfs-upgrade(8), zfs-userspace(8), zfs-wait(8), zpool(8)

FreeBSD 14.3-RELEASE             May 12, 2022             FreeBSD 14.3-RELEASE
